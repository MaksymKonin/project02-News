{"mappings":"+oBACuB,IAAI,EAD3BA,EAAA,SAC2BC,SACZ,MAAMC,EAInBC,KAAKC,EAAKC,GACR,IACE,MAAMC,EAAYC,KAAKC,UAAUH,GACjCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAMA,E,EAGlBE,KAAKT,GACH,IACE,MAAMU,EAAOL,aAAaM,QAAQX,GAClC,OAAgB,OAATU,OAAgBE,EAAYT,KAAKU,MAAMH,E,CAC9C,MAAOH,GACPC,QAAQD,MAAMA,E,EAGlBO,cACE,OAAOC,KAAKN,KAAKM,KAAKC,iBAClBD,KAAKN,KAAKM,KAAKC,sBACfJ,C,CAENK,gBAAgBC,GACdV,QAAQW,IAAI,mBACZ,IAAIC,EAAUL,KAAKD,cAAgBC,KAAKD,cAAgB,GACxDM,EAAQC,aAAeH,EACvBH,KAAKhB,KAAKgB,KAAKC,gBAAiBI,E,CAElCE,sBAAsBC,GACpBf,QAAQW,IAAI,yBACZ,IAAIC,EAAUL,KAAKD,cAAgBC,KAAKD,cAAgB,GACxDM,EAAQI,mBAAqBD,EAC7BR,KAAKhB,KAAKgB,KAAKC,gBAAiBI,E,CAGlCK,kBACEjB,QAAQW,IAAI,mBACZ,IAAIC,EAAUL,KAAKD,cACfO,EAAeD,GAASC,aAAeD,EAAQC,aAAe,KAElE,OADAb,QAAQW,IAAIE,GACLA,C,CAGTK,wBACElB,QAAQW,IAAI,yBACZ,IAAIC,EAAUL,KAAKD,cACfU,EAAqBJ,GAASI,mBAC9BJ,EAAQI,mBAAmBG,KAAK,QAChC,KAEJ,OADAnB,QAAQW,IAAIK,GACLA,C,CApDTI,cACEb,KAAKC,gBAAkB,S,sFCF3B,MAAMa,EACJ,2DAOa,MAAMC,EAOnBC,gBACE,OAAOC,MACL,GAAGH,OAAqBd,KAAKkB,oBAAoBlB,KAAKmB,iDACtDC,MAAKC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAG3B,OADAxB,KAAKyB,WACEJ,EAASK,MAAM,G,CAI1BD,WACEzB,KAAKmB,MAAQ,C,CAGfQ,YACE3B,KAAKmB,KAAO,EACZnB,KAAK4B,UAAY,C,CAGnBC,aAAaC,GACX9B,KAAK4B,UAAY5B,KAAK4B,UAAYE,C,CAGpCC,iBACE,OAAOd,MACL,qGACAG,MAAKC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASK,MAAM,G,CAI1BM,oBACE,OAAOf,MAAM,0GAA6CG,MAAKC,IAC7D,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASK,MAAM,G,CAI1BO,uBAAuB3B,EAAcG,GACnC,IAAIyB,EAAiB,GACjBC,EAAuB,GAW3B,OATI1B,IACF0B,EAAuB,kBAAkB1B,MAE3ChB,QAAQW,IAAIE,GACZ4B,EACG5B,GAAiC,OAAjBA,EAEb,kDAAkDA,cAAyBA,6CAD3E,4CAGCW,MACL,GAAGH,IAAkBoB,IAAiBC,KACtCf,MAAKC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASK,MAAM,G,CAtE1Bb,cACEb,KAAKkB,YAAc,GACnBlB,KAAKoC,mBAAqBpC,KAAKmB,KAAO,EACtCnB,KAAK4B,UAAY,C","sources":["src/js/localStorage.js","src/js/newsApiService.js"],"sourcesContent":["import NewsApiService from './newsApiService';\nconst newsApiService = new NewsApiService();\nexport default class localStorageService {\n  constructor() {\n    this.keySavedFilters = 'Filters';\n  }\n  save(key, value) {\n    try {\n      const valueJson = JSON.stringify(value);\n      localStorage.setItem(key, valueJson);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  load(key) {\n    try {\n      const data = localStorage.getItem(key);\n      return data === null ? undefined : JSON.parse(data);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  loadFilters() {\n    return this.load(this.keySavedFilters)\n      ? this.load(this.keySavedFilters)\n      : undefined;\n  }\n  saveDataFilters(date) {\n    console.log('saveDataFilters');\n    let filters = this.loadFilters() ? this.loadFilters() : {};\n    filters.selectedDate = date;\n    this.save(this.keySavedFilters, filters);\n  }\n  saveCategoriesFilters(categories) {\n    console.log('saveCategoriesFilters');\n    let filters = this.loadFilters() ? this.loadFilters() : {};\n    filters.selectedCategories = categories;\n    this.save(this.keySavedFilters, filters);\n  }\n\n  loadDataFilters() {\n    console.log('loadDataFilters');\n    let filters = this.loadFilters();\n    let selectedDate = filters?.selectedDate ? filters.selectedDate : null;\n    console.log(selectedDate);\n    return selectedDate;\n  }\n\n  loadCategoriesFilters() {\n    console.log('loadCategoriesFilters');\n    let filters = this.loadFilters();\n    let selectedCategories = filters?.selectedCategories\n      ? filters.selectedCategories.join('\", \"')\n      : '\"\"';\n    console.log(selectedCategories);\n    return selectedCategories;\n  }\n}\n","import axios from 'axios';\n\nconst SEARCH_NEWS_URL =\n  'https://api.nytimes.com/svc/search/v2/articlesearch.json';\nconst POPULAR_NEWS_URL = 'https://api.nytimes.com/svc/mostpopular/v2/viewed';\nconst CATEGORIES_LIST_URL =\n  'https://api.nytimes.com/svc/news/v3/content/section-list.json';\nconst POPULAR_NEWS_DAYS = 7;\nconst API_KEY = 'H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM';\n\nexport default class newsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.SEARCH_BY_DATE_URL = this.page = 0;\n    this.loadCards = 0;\n  }\n\n  getsearchNews() {\n    return fetch(\n      `${SEARCH_NEWS_URL}?q=${this.searchQuery}&page=${this.page}&api-key=${API_KEY}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      this.nextPage();\n      return responce.json();\n    });\n  }\n\n  nextPage() {\n    this.page += 1;\n  }\n\n  resetData() {\n    this.page = 0;\n    this.loadCards = 0;\n  }\n\n  addLoadCards(quantityLoadCards) {\n    this.loadCards = this.loadCards + quantityLoadCards;\n  }\n\n  getpopularNews() {\n    return fetch(\n      `${POPULAR_NEWS_URL}/${POPULAR_NEWS_DAYS}.json?api-key=${API_KEY}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n\n  getlistCategories() {\n    return fetch(`${CATEGORIES_LIST_URL}?api-key=${API_KEY}`).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n\n  getDateAndCategoryNews(selectedDate, selectedCategories) {\n    let SEARCH_BY_DATE = '';\n    let SEARCH_BY_CATEGORIES = '';\n\n    if (selectedCategories) {\n      SEARCH_BY_CATEGORIES = `&fq=news_desk:(${selectedCategories})`;\n    }\n    console.log(selectedDate);\n    SEARCH_BY_DATE =\n      !selectedDate || selectedDate === null\n        ? `?api-key=${API_KEY}`\n        : `?facet_field=day_of_week&facet=true&begin_date=${selectedDate}&end_date=${selectedDate}&api-key=${API_KEY}`;\n\n    return fetch(\n      `${SEARCH_NEWS_URL}${SEARCH_BY_DATE}${SEARCH_BY_CATEGORIES}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n}\n"],"names":["parcelRequire","default","$2338c8cd734f85a6$export$2e2bcd8739ae039","save","key","value","valueJson","JSON","stringify","localStorage","setItem","error","console","load","data","getItem","undefined","parse","loadFilters","this","keySavedFilters","saveDataFilters","date","log","filters","selectedDate","saveCategoriesFilters","categories","selectedCategories","loadDataFilters","loadCategoriesFilters","join","constructor","$af2b51ed280f3c7d$var$SEARCH_NEWS_URL","$af2b51ed280f3c7d$export$2e2bcd8739ae039","getsearchNews","fetch","searchQuery","page","then","responce","ok","Error","statusText","nextPage","json","resetData","loadCards","addLoadCards","quantityLoadCards","getpopularNews","getlistCategories","getDateAndCategoryNews","SEARCH_BY_DATE","SEARCH_BY_CATEGORIES","SEARCH_BY_DATE_URL"],"version":3,"file":"read.c96a3529.js.map"}