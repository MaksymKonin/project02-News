{"mappings":"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","sources":["src/js/newsApiService.js","src/js/localStorage.js","src/js/currentLink.js","src/js/refs.js","src/js/changeTheme.js","src/js/markupCard.js","src/js/pages/read.js","src/js/renderNews.js"],"sourcesContent":["const SEARCH_NEWS_URL =\n  'https://api.nytimes.com/svc/search/v2/articlesearch.json';\nconst POPULAR_NEWS_URL = 'https://api.nytimes.com/svc/mostpopular/v2/viewed';\nconst CATEGORIES_LIST_URL =\n  'https://api.nytimes.com/svc/news/v3/content/section-list.json';\nconst POPULAR_NEWS_DAYS = 7;\nconst API_KEY = 'H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM';\n\nexport default class newsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 0;\n    this.pageNum = 1;\n    this.requestNum = 1;\n  }\n\n  resetData() {\n    this.page = 0;\n    this.pageNum = 1;\n    this.requestNum = 1;\n  }\n\n  getSearchNews() {\n    return fetch(\n      `${SEARCH_NEWS_URL}?q=${this.searchQuery}&page=${this.page}&api-key=${API_KEY}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n\n  getPopularNews() {\n    return fetch(\n      `${POPULAR_NEWS_URL}/${POPULAR_NEWS_DAYS}.json?api-key=${API_KEY}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n\n  getlistCategories() {\n    return fetch(`${CATEGORIES_LIST_URL}?api-key=${API_KEY}`).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n\n  getDateAndCategoryNews(selectedDate, selectedCategories) {\n    let SEARCH_BY_DATE = '';\n    let SEARCH_BY_CATEGORIES = '';\n    if (selectedCategories) {\n      SEARCH_BY_CATEGORIES = `&fq=news_desk:(${selectedCategories})`;\n    }\n    SEARCH_BY_DATE =\n      !selectedDate || selectedDate === null\n        ? `?api-key=${API_KEY}&page=${this.page}`\n        : `?facet_field=day_of_week&facet=true&begin_date=${selectedDate}&end_date=${selectedDate}&api-key=${API_KEY}`;\n\n    return fetch(\n      `${SEARCH_NEWS_URL}${SEARCH_BY_DATE}${SEARCH_BY_CATEGORIES}`\n    ).then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.statusText);\n      }\n      return responce.json();\n    });\n  }\n}\n","import NewsApiService from './newsApiService';\nconst newsApiService = new NewsApiService();\nexport default class localStorageService {\n  constructor() {\n    this.keySavedFilters = 'Filters';\n    this.FAVORITES_NEWS = 'favorite-news';\n    this.PAGINATION_NEWS = 'pagination-news';\n    this.CLICKED_PAGES = 'clickedPages';\n    this.PAGE_DATA_NEWS = 'pageDataNews';\n    this.CALENDAR_PARAMETERS = 'calendarParameters';\n  }\n  save(key, value) {\n    try {\n      const valueJson = JSON.stringify(value);\n      localStorage.setItem(key, valueJson);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  load(key) {\n    try {\n      const data = localStorage.getItem(key);\n      return data === null ? undefined : JSON.parse(data);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  loadFilters() {\n    return this.load(this.keySavedFilters)\n      ? this.load(this.keySavedFilters)\n      : undefined;\n  }\n  saveDataFilters(date) {\n    let filters = this.loadFilters() ? this.loadFilters() : {};\n    filters.selectedDate = date;\n    this.save(this.keySavedFilters, filters);\n  }\n  saveCategoriesFilters(categories) {\n    let filters = this.loadFilters() ? this.loadFilters() : {};\n    filters.selectedCategories = categories;\n    this.save(this.keySavedFilters, filters);\n  }\n\n  loadDataFilters() {\n    let filters = this.loadFilters();\n    let selectedDate = filters?.selectedDate ? filters.selectedDate : null;\n    return selectedDate;\n  }\n\n  loadCategoriesFilters() {\n    let filters = this.loadFilters();\n    let selectedCategories = filters?.selectedCategories\n      ? filters.selectedCategories.join('\", \"')\n      : '\"\"';\n    return selectedCategories;\n  }\n}\n","const links = document.querySelectorAll('.navigation-list__link');\n\nexport default function setNewActiveLink() {\n  const links = document.querySelectorAll('.navigation-list__link');\n  links.forEach(link => {\n    if (link.classList.contains('navigation-list__link--current'))\n      link.classList.remove('navigation-list__link--current');\n    let currentHref = window.location.href;\n    if (currentHref.includes(link.getAttribute('href')))\n      link.classList.add('navigation-list__link--current');\n  });\n}\n","export const refs = {\n  formEl: document.querySelector('.js-form-search'),\n  containerCategoriesEl: document.querySelector('.js-categories'),\n  containerCardEl: document.querySelector('.js-container-card'),\n  weatherCard: document.querySelector('.weather__card'),\n  containerPaginationEl: document.querySelector('.js-pagination'),\n  checkBoxEl: document.querySelector('.theme-switch__toggle'),\n  bodyEl: document.querySelector('body'),\n  dateTimePicker: document.querySelector('#datetime-picker'),\n  calendarWrapper: document.querySelector('.filters-section-calendar-wrapper'),\n  lightTheme: document.querySelector('.light-theme'),\n  darkTheme: document.querySelector('.dark-theme'),\n};\n","// Theme switch\nimport { refs } from './refs';\nexport default function changeTheme() {\n  refs.checkBoxEl.addEventListener('change', goDark);\n  goTeal();\n}\nconst theme = {\n  light: 'light-theme',\n  dark: 'dark-theme',\n};\n\nconst storageKey = 'themeKey';\nconst toggle = document.querySelector('.theme__track');\n\nfunction goDark(event) {\n  if (event.target.checked) {\n    refs.bodyEl.classList.remove('ligth-theme');\n    refs.bodyEl.classList.add('dark-theme');\n    // refs.darkTheme.classList.add('goDark');\n    refs.lightTheme.classList.remove('goLight');\n    toggle.classList.add('toggleDark');\n    toggle.classList.remove('toggleLight');\n    localStorage.setItem(storageKey, JSON.stringify(theme.dark));\n  } else {\n    refs.bodyEl.classList.remove('dark-theme');\n    refs.bodyEl.classList.add('ligth-theme');\n    // refs.darkTheme.classList.remove('goDark');\n    refs.lightTheme.classList.add('goLight');\n    toggle.classList.add('toggleLight');\n    toggle.classList.remove('toggleDark');\n    localStorage.setItem(storageKey, JSON.stringify(theme.light));\n  }\n}\n\nfunction goTeal() {\n  const saveTheme = localStorage.getItem(storageKey);\n  if (!saveTheme) {\n    refs.bodyEl.classList.add('ligth-theme');\n    localStorage.setItem(storageKey, JSON.stringify(theme.light));\n  } else {\n    const parseTheme = JSON.parse(saveTheme);\n    if (parseTheme === 'dark-theme') {\n      refs.bodyEl.classList.add('dark-theme');\n      refs.checkBoxEl.checked = true;\n    }\n  }\n}\n","export default function markupCard(card) {\n  const {\n    id_news,\n    photo_url,\n    page_url,\n    section,\n    statusFavorite,\n    title,\n    abstract,\n    published_date,\n  } = card;\n  return `\n    <li data-id-news=\"${id_news}\" class=\"js-card\">\n      <div class=\"use-text-tape\">\n        <span class=\"status-reed\">Have read</span>\n        <span class=\"job-text\">\"${section}\"</span>\n        <button class=\"status-favorite add-status add-status-js\" type=\"button\">${statusFavorite}</button>\n        <button class=\"status-favorite remove-status remove-status-js\" type=\"button\">Remove from favorite</button>\n      <div>\n      <div class=\"card-img-wrapper\">\n      <img class=\"card-img\" src=\"${photo_url}\" alt=\"photo news\" />\n      </div>\n      <a href=\"${page_url}\" target=\"_blank\"><h2 class=\"page-url\">${title}</h2></a>\n      <p class=\"abstract-text\">${abstract}</p>\n      <div>\n        <span class=\"published-date\">${published_date}</span>\n        <a class=\"read-more\" target=\"_blank\" href=\"${page_url}\">Read more</a>\n      </div>\n    </li>\n    `;\n}\n","import LocalStorageService from '../localStorage';\nimport setNewActiveLink from '../currentLink';\nimport changeTheme from '../changeTheme';\nimport { createCardNotFound } from '../renderNews';\nimport markupCard from '../markupCard';\n\nconst localStorageService = new LocalStorageService();\nsetNewActiveLink();\nchangeTheme();\n\nconst lsNewsKey = 'have-read-id';\nconst readNews = localStorageService.load(lsNewsKey);\nif (readNews && readNews.length > 1) {\n  const groupedNewsByReadDate = groupByReadDate(readNews);\n  renderExpansionPanel(groupedNewsByReadDate);\n} else {\n  createCardNotFound();\n}\n\nfunction renderExpansionPanel(data) {\n  const readContainer = document.querySelector('#read-container');\n  const dates = Object.keys(data);\n  dates.forEach(val => {\n    const panel = `<button class=\"accordion\"><div class=\"accordion-date\">${val}</div></button>\n      <div class=\"panel\">\n       <ul class=\"news-container\">\n       ${renderReadNews(data[val])}</ul>\n      </div>`;\n    readContainer.insertAdjacentHTML('beforeend', panel);\n  });\n  applyAccordion();\n}\n\nfunction renderReadNews(news) {\n  let cards = news\n    .map(Data => {\n      return markupCard(Data);\n    })\n    .join('');\n  return cards;\n}\n\nfunction applyAccordion() {\n  const acc = document.getElementsByClassName('accordion');\n  var i;\n\n  for (i = 0; i < acc.length; i++) {\n    acc[i].addEventListener('click', function () {\n      this.classList.toggle('active');\n      var panel = this.nextElementSibling;\n      if (panel.style.display === 'block') {\n        panel.style.display = 'none';\n      } else {\n        panel.style.display = 'block';\n      }\n    });\n  }\n}\n\nfunction groupByReadDate(data) {\n  const groups = {};\n\n  data.forEach(val => {\n    const date = new Date(val.date)\n      .toISOString()\n      .split('T')[0]\n      .split('-')\n      .join('/');\n    if (date in groups) {\n      groups[date].push(val);\n    } else {\n      groups[date] = new Array(val);\n    }\n  });\n  return groups;\n}\n","import markupCard from './markupCard';\nimport { refs } from './refs';\n//ф-я рендер всих карток новин\nfunction renderNews(paginationPage) {\n  if (!paginationPage || paginationPage?.length === 0) {\n    return;\n  }\n  let cards = paginationPage\n    .map(Data => {\n      return markupCard(Data);\n    })\n    .join('');\n  refs.containerCardEl.insertAdjacentHTML('beforeend', cards);\n}\n// створення карточки без новин\nfunction createCardNotFound() {\n  refs.weatherCard?.classList.add('is-display-none');\n  const card = `<div class=\"not-found-container\"><h1 class=\"not-found-title\">We haven’t found news from <br/> this category</h1>\n  <div class=\"not-found-img\"></div></div>`;\n  refs.containerCardEl.insertAdjacentHTML('beforeend', card);\n}\n//ф-я очистки контейнера новин\nfunction clearMarkupNews() {\n  if (refs.weatherCard?.classList.contains('is-display-none')) {\n    refs.weatherCard?.classList.remove('is-display-none');\n  }\n  if (document.querySelector('.not-found-container')) {\n    document.querySelector('.not-found-container').remove();\n  }\n  const cards = document.querySelectorAll('.js-card');\n  cards.forEach(card => {\n    card.remove();\n  });\n}\n\nexport { renderNews, createCardNotFound, clearMarkupNews };\n"],"names":["$af2b51ed280f3c7d$var$SEARCH_NEWS_URL","$af2b51ed280f3c7d$var$API_KEY","resetData","this","page","pageNum","requestNum","getSearchNews","fetch","searchQuery","then","responce","ok","Error","statusText","json","getPopularNews","getlistCategories","getDateAndCategoryNews","selectedDate","selectedCategories","SEARCH_BY_DATE","SEARCH_BY_CATEGORIES","constructor","document","querySelectorAll","$ee27a4d7c64fc8c4$export$21666b427502ea6d","formEl","querySelector","containerCategoriesEl","containerCardEl","weatherCard","containerPaginationEl","checkBoxEl","bodyEl","dateTimePicker","calendarWrapper","lightTheme","darkTheme","$11ca32f5771e85c4$var$theme","light","dark","$11ca32f5771e85c4$var$storageKey","$11ca32f5771e85c4$var$toggle","$11ca32f5771e85c4$var$goDark","event","target","checked","classList","remove","add","localStorage","setItem","JSON","stringify","$aff3562117d39259$export$2e2bcd8739ae039","card","id_news","photo_url","page_url","section","statusFavorite","title","abstract","published_date","$2c703fcf58d595b4$var$localStorageService","save","key","value","valueJson","error","console","load","data","getItem","undefined","parse","loadFilters","keySavedFilters","saveDataFilters","date","filters","saveCategoriesFilters","categories","loadDataFilters","loadCategoriesFilters","join","FAVORITES_NEWS","PAGINATION_NEWS","CLICKED_PAGES","PAGE_DATA_NEWS","CALENDAR_PARAMETERS","forEach","link","contains","window","location","href","includes","getAttribute","addEventListener","saveTheme","$11ca32f5771e85c4$var$goTeal","$2c703fcf58d595b4$var$readNews","length","readContainer","Object","keys","val","panel","news","map","Data","insertAdjacentHTML","acc","getElementsByClassName","i","toggle","nextElementSibling","style","display","$2c703fcf58d595b4$var$applyAccordion","$2c703fcf58d595b4$var$renderExpansionPanel","groups","Date","toISOString","split","push","Array","$2c703fcf58d595b4$var$groupByReadDate"],"version":3,"file":"read.42393ef6.js.map"}