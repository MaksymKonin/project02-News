document.querySelectorAll(".navigation-list__link");const e={formEl:document.querySelector(".js-form-search"),containerCategoriesEl:document.querySelector(".js-categories"),containerCardEl:document.querySelector(".js-container-card"),weatherCard:document.querySelector(".weather__card"),containerPaginationEl:document.querySelector(".js-pagination"),checkBoxEl:document.querySelector(".theme-switch__toggle"),bodyEl:document.querySelector("body"),dateTimePicker:document.querySelector("#datetime-picker"),calendarWrapper:document.querySelector(".filters-section-calendar-wrapper")};const t="light-theme",s="dark-theme";function a(a){a.target.checked?(e.bodyEl.classList.remove("ligth-theme"),e.bodyEl.classList.add("dark-theme"),localStorage.setItem("themeKey",JSON.stringify(s))):(e.bodyEl.classList.remove("dark-theme"),e.bodyEl.classList.add("ligth-theme"),localStorage.setItem("themeKey",JSON.stringify(t)))}new class{getsearchNews(){return fetch(`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${this.searchQuery}&page=${this.page}&api-key=H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM`).then((e=>{if(!e.ok)throw new Error(e.statusText);return this.nextPage(),e.json()}))}nextPage(){this.page+=1}resetData(){this.page=0,this.loadCards=0}addLoadCards(e){this.loadCards=this.loadCards+e}getpopularNews(){return fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/7.json?api-key=H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}getlistCategories(){return fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}getDateAndCategoryNews(e,t){let s="",a="";return t&&(a=`&fq=news_desk:(${t})`),console.log(e),s=e&&null!==e?`?facet_field=day_of_week&facet=true&begin_date=${e}&end_date=${e}&api-key=H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM`:"?api-key=H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM",fetch(`https://api.nytimes.com/svc/search/v2/articlesearch.json${s}${a}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}constructor(){this.searchQuery="",this.SEARCH_BY_DATE_URL=this.page=0,this.loadCards=0}};class r{save(e,t){try{const s=JSON.stringify(t);localStorage.setItem(e,s)}catch(e){console.error(e)}}load(e){try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error(e)}}loadFilters(){return this.load(this.keySavedFilters)?this.load(this.keySavedFilters):void 0}saveDataFilters(e){console.log("saveDataFilters");let t=this.loadFilters()?this.loadFilters():{};t.selectedDate=e,this.save(this.keySavedFilters,t)}saveCategoriesFilters(e){console.log("saveCategoriesFilters");let t=this.loadFilters()?this.loadFilters():{};t.selectedCategories=e,this.save(this.keySavedFilters,t)}loadDataFilters(){console.log("loadDataFilters");let e=this.loadFilters(),t=e?.selectedDate?e.selectedDate:null;return console.log(t),t}loadCategoriesFilters(){console.log("loadCategoriesFilters");let e=this.loadFilters(),t=e?.selectedCategories?e.selectedCategories.join('", "'):'""';return console.log(t),t}constructor(){this.keySavedFilters="Filters",this.FAVORITES_NEWS="favorite-news"}}let o=[],n=[];const i=new r;e.containerCardEl.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&location.reload()})),document.querySelectorAll(".navigation-list__link").forEach((e=>{e.classList.contains("navigation-list__link--current")&&e.classList.remove("navigation-list__link--current"),window.location.href.includes(e.getAttribute("href"))&&e.classList.add("navigation-list__link--current")})),e.checkBoxEl.addEventListener("change",a),function(){const s=localStorage.getItem("themeKey");s?"dark-theme"===JSON.parse(s)&&(e.bodyEl.classList.add("dark-theme"),e.checkBoxEl.checked=!0):(e.bodyEl.classList.add("ligth-theme"),localStorage.setItem("themeKey",JSON.stringify(t)))}();const l=new r,d=l.load(l.FAVORITES_NEWS);var c;d?(e.weatherCard.classList.contains("is-hidden")&&e.weatherCard.classList.remove("is-hidden"),document.querySelector(".not-found-container")&&document.querySelector(".not-found-container").remove(),document.querySelectorAll(".js-card").forEach((e=>{e.remove()})),function(t){let s=t.map((e=>function(e){const{id_news:t,photo_url:s,page_url:a,section:r,statusFavorite:o,title:n,abstract:i,published_date:l}=e;return`\n    <li data-id-news="${t}" class="js-card">\n      <div class="use-text-tape">\n        <span class="status-reed">Have read</span>\n        <span class="job-text">"${r}"</span>\n        <button class="status-favorite add-status add-status-js" type="button">${o}</button>\n        <button class="status-favorite remove-status remove-status-js" type="button">Remove from favorite</button>\n      <div>\n      <div class="card-img-wrapper">\n      <img class="card-img" src="${s}" alt="photo news" />\n      </div>\n      <a href="${a}"><h2 class="page-url">${n}</h2></a>\n      <p class="abstract-text">${i}</p>\n      <div>\n        <span class="published-date">${l}</span>\n        <a class="read-more" target="_blank" href="${a}">Read more</a>\n      </div>\n    </li>\n    `}(e))).join("");e.containerCardEl.insertAdjacentHTML("beforeend",s)}(d),function(e){const t=i.load("favorite-news"),s=i.load("have-read-id");let a=[];s&&s.map((e=>{a.push(e.id)}));let r=[];t&&(t.map((e=>{r.push(e.id_news)})),e.map((e=>{if(r.includes(e.id_news)){const t=document.querySelector(`[data-id-news="${e.id_news}"]`).firstElementChild,s=t.querySelector(".add-status-js"),a=t.querySelector(".remove-status-js");s.style.display="none",a.style.display="block"}a.includes(String(e.id_news))&&(document.querySelector(`[data-id-news="${e.id_news}"]`).firstElementChild.querySelector(".status-reed").style.display="block")})))}(c=d),function(e){const t=i.load("have-read-id");t&&t.map((e=>{const t={id:e.id,abstract:e.abstract,page_url:e.page_url,photo_url:e.photo_url,published_date:e.published_date,section:e.section,title:e.title,date:e.date};o.push(t)}));const s=(new Date).getTime(),a=document.querySelectorAll(".read-more");Array.from(a).map((t=>{t.addEventListener("click",(t=>{t.target.parentNode.parentNode.parentNode.firstElementChild.style.display="block";const a=t.target.parentNode.parentNode.parentNode.parentNode.dataset.idNews;o.includes(a)||e.map((e=>{if(String(e.id_news)===a){const t={id:a,abstract:e.abstract,page_url:e.page_url,photo_url:e.photo_url,published_date:e.published_date,section:e.section,title:e.title,date:s};o.push(t),i.save("have-read-id",o)}}))}))}))}(c),function(e){const t=document.querySelectorAll(".add-status-js");Array.from(t).map((t=>{t.addEventListener("click",(t=>{const s=t.target,a=s.nextElementSibling,r=s.parentNode.parentNode.dataset.idNews;s.style.display="none",a.style.display="block",e.map((e=>{String(e.id_news)===r&&(n.push(e),i.save("favorite-news",n))}))}))}))}(c),function(e){const t=document.querySelectorAll(".remove-status-js");let s=Array.from(t),a=[];n=i.load("favorite-news")||[],0!==n.length&&n.map((e=>{a.push(e.id_news)})),s.map((t=>{t.addEventListener("click",(t=>{const s=t.target,r=s.previousElementSibling,o=s.parentNode.parentNode.dataset.idNews;r.style.display="block",s.style.display="none",e.map((e=>{if(String(e.id_news)===o){const t=a.indexOf(e.id_news);n.splice(t,1),i.save("favorite-news",n)}}))}))}))}(c)):(e.weatherCard.classList.add("is-hidden"),console.log(5),e.containerCardEl.insertAdjacentHTML("beforeend",'<div class="not-found-container"><h1 class="not-found-title">We havenâ€™t found news from <br/> this category</h1>\n  <div class="not-found-img"></div></div>'));
//# sourceMappingURL=favorite.30d48ffc.js.map
