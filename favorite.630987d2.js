!function(){function e(e){return e&&e.__esModule?e.default:e}document.querySelectorAll(".navigation-list__link");var t={formEl:document.querySelector(".js-form-search"),containerCategoriesEl:document.querySelector(".js-categories"),containerCardEl:document.querySelector(".js-container-card"),weatherCard:document.querySelector(".weather__card"),containerPaginationEl:document.querySelector(".js-pagination"),checkBoxEl:document.querySelector(".theme-switch__toggle"),bodyEl:document.querySelector("body"),dateTimePicker:document.querySelector("#datetime-picker"),calendarWrapper:document.querySelector(".filters-section-calendar-wrapper")};var a="light-theme",n="dark-theme",r="themeKey";function o(e){e.target.checked?(t.bodyEl.classList.remove("ligth-theme"),t.bodyEl.classList.add("dark-theme"),localStorage.setItem(r,JSON.stringify(n))):(t.bodyEl.classList.remove("dark-theme"),t.bodyEl.classList.add("ligth-theme"),localStorage.setItem(r,JSON.stringify(a)))}var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var i={};function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,a){t&&c(e.prototype,t);a&&c(e,a);return e};var l,d="https://api.nytimes.com/svc/search/v2/articlesearch.json",u="H4EzmbJjzcMKAQjlOxUvVd6TipG3GhzM",h=(new(function(){"use strict";function t(){e(s)(this,t),this.searchQuery="",this.SEARCH_BY_DATE_URL=this.page=0,this.loadCards=0}return e(i)(t,[{key:"getsearchNews",value:function(){var e=this;return fetch("".concat(d,"?q=").concat(this.searchQuery,"&page=").concat(this.page,"&api-key=").concat(u)).then((function(t){if(!t.ok)throw new Error(t.statusText);return e.nextPage(),t.json()}))}},{key:"nextPage",value:function(){this.page+=1}},{key:"resetData",value:function(){this.page=0,this.loadCards=0}},{key:"addLoadCards",value:function(e){this.loadCards=this.loadCards+e}},{key:"getpopularNews",value:function(){return fetch("".concat("https://api.nytimes.com/svc/mostpopular/v2/viewed","/").concat(7,".json?api-key=").concat(u)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}},{key:"getlistCategories",value:function(){return fetch("".concat("https://api.nytimes.com/svc/news/v3/content/section-list.json","?api-key=").concat(u)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}},{key:"getDateAndCategoryNews",value:function(e,t){var a,n="";return t&&(n="&fq=news_desk:(".concat(t,")")),a=e&&null!==e?"?facet_field=day_of_week&facet=true&begin_date=".concat(e,"&end_date=").concat(e,"&api-key=").concat(u):"?api-key=".concat(u),fetch("".concat(d).concat(a).concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}}]),t}()),function(){"use strict";function t(){e(s)(this,t),this.keySavedFilters="Filters",this.FAVORITES_NEWS="favorite-news"}return e(i)(t,[{key:"save",value:function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(e){console.error(e)}}},{key:"load",value:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error(e)}}},{key:"loadFilters",value:function(){return this.load(this.keySavedFilters)?this.load(this.keySavedFilters):void 0}},{key:"saveDataFilters",value:function(e){var t=this.loadFilters()?this.loadFilters():{};t.selectedDate=e,this.save(this.keySavedFilters,t)}},{key:"saveCategoriesFilters",value:function(e){var t=this.loadFilters()?this.loadFilters():{};t.selectedCategories=e,this.save(this.keySavedFilters,t)}},{key:"loadDataFilters",value:function(){var e=this.loadFilters();return(null==e?void 0:e.selectedDate)?e.selectedDate:null}},{key:"loadCategoriesFilters",value:function(){var e=this.loadFilters();return(null==e?void 0:e.selectedCategories)?e.selectedCategories.join('", "'):'""'}}]),t}()),v="have-read-id",f="favorite-news",p=[],y=[],m=new h;t.containerCardEl.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&location.reload()})),document.querySelectorAll(".navigation-list__link").forEach((function(e){e.classList.contains("navigation-list__link--current")&&e.classList.remove("navigation-list__link--current"),window.location.href.includes(e.getAttribute("href"))&&e.classList.add("navigation-list__link--current")})),t.checkBoxEl.addEventListener("change",o),(l=localStorage.getItem(r))?"dark-theme"===JSON.parse(l)&&(t.bodyEl.classList.add("dark-theme"),t.checkBoxEl.checked=!0):(t.bodyEl.classList.add("ligth-theme"),localStorage.setItem(r,JSON.stringify(a)));var g,k,_=new h,w=_.load(_.FAVORITES_NEWS);w?(t.weatherCard.classList.contains("is-hidden")&&t.weatherCard.classList.remove("is-hidden"),document.querySelector(".not-found-container")&&document.querySelector(".not-found-container").remove(),document.querySelectorAll(".js-card").forEach((function(e){e.remove()})),k=w.map((function(e){return a=(t=e).id_news,n=t.photo_url,r=t.page_url,o=t.section,s=t.statusFavorite,i=t.title,c=t.abstract,l=t.published_date,'\n    <li data-id-news="'.concat(a,'" class="js-card">\n      <div class="use-text-tape">\n        <span class="status-reed">Have read</span>\n        <span class="job-text">"').concat(o,'"</span>\n        <button class="status-favorite add-status add-status-js" type="button">').concat(s,'</button>\n        <button class="status-favorite remove-status remove-status-js" type="button">Remove from favorite</button>\n      <div>\n      <div class="card-img-wrapper">\n      <img class="card-img" src="').concat(n,'" alt="photo news" />\n      </div>\n      <a href="').concat(r,'"><h2 class="page-url">').concat(i,'</h2></a>\n      <p class="abstract-text">').concat(c,'</p>\n      <div>\n        <span class="published-date">').concat(l,'</span>\n        <a class="read-more" target="_blank" href="').concat(r,'">Read more</a>\n      </div>\n    </li>\n    ');var t,a,n,r,o,s,i,c,l})).join(""),t.containerCardEl.insertAdjacentHTML("beforeend",k),function(e){var t=m.load(f),a=m.load(v),n=[];a&&a.map((function(e){n.push(e.id)}));var r=[];t&&(t.map((function(e){r.push(e.id_news)})),e.map((function(e){if(r.includes(e.id_news)){var t=document.querySelector('[data-id-news="'.concat(e.id_news,'"]')).firstElementChild,a=t.querySelector(".add-status-js"),o=t.querySelector(".remove-status-js");a.style.display="none",o.style.display="block"}n.includes(String(e.id_news))&&(document.querySelector('[data-id-news="'.concat(e.id_news,'"]')).firstElementChild.querySelector(".status-reed").style.display="block")})))}(g=w),function(e){var t=m.load(v);t&&t.map((function(e){var t={id:e.id,abstract:e.abstract,page_url:e.page_url,photo_url:e.photo_url,published_date:e.published_date,section:e.section,title:e.title,date:e.date};p.push(t)}));var a=(new Date).getTime(),n=document.querySelectorAll(".read-more");Array.from(n).map((function(t){t.addEventListener("click",(function(t){t.target.parentNode.parentNode.parentNode.firstElementChild.style.display="block";var n=t.target.parentNode.parentNode.parentNode.parentNode.dataset.idNews;p.includes(n)||e.map((function(e){if(String(e.id_news)===n){var t={id:n,abstract:e.abstract,page_url:e.page_url,photo_url:e.photo_url,published_date:e.published_date,section:e.section,title:e.title,date:a};p.push(t),m.save(v,p)}}))}))}))}(g),function(e){var t=document.querySelectorAll(".add-status-js");Array.from(t).map((function(t){t.addEventListener("click",(function(t){var a=t.target,n=a.nextElementSibling,r=a.parentNode.parentNode.dataset.idNews;a.style.display="none",n.style.display="block",e.map((function(e){String(e.id_news)===r&&(y.push(e),m.save(f,y))}))}))}))}(g),function(e){var t=document.querySelectorAll(".remove-status-js"),a=Array.from(t),n=[];0!==(y=m.load(f)||[]).length&&y.map((function(e){n.push(e.id_news)})),a.map((function(t){t.addEventListener("click",(function(t){var a=t.target,r=a.previousElementSibling,o=a.parentNode.parentNode.dataset.idNews;r.style.display="block",a.style.display="none",e.map((function(e){if(String(e.id_news)===o){var t=n.indexOf(e.id_news);y.splice(t,1),m.save(f,y)}}))}))}))}(g)):(t.weatherCard.classList.add("is-hidden"),console.log(5),t.containerCardEl.insertAdjacentHTML("beforeend",'<div class="not-found-container"><h1 class="not-found-title">We havenâ€™t found news from <br/> this category</h1>\n  <div class="not-found-img"></div></div>'))}();
//# sourceMappingURL=favorite.630987d2.js.map
